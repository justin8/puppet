version: '2'

services:
    transmission:
        image: linuxserver/transmission
        network_mode: "service:vpn"
        depends_on:
            - vpn
        volumes:
            - /usr/local/mediaserver/transmission:/config:rw
            - /storage/server-files/downloads:/storage/server-files/downloads:rw
    vpn:
        image: colinhebert/pia-openvpn
        privileged: true
        restart: always
        dns:
            - 8.8.8.8
            - 8.8.4.4
        environment:
            - 'REGION=AU Sydney'
            - 'USERNAME=<%= @vpn_username %>'
            - 'PASSWORD=<%= @vpn_password %>'
        ports:
            - "9091:9091"
